You are a senior full-stack SaaS architect and security-focused startup engineer.

I want to build a real multi-tenant SaaS product called:

“HDOS – Hotel Digital Operating System”

This is NOT a single hotel website.
This is a scalable platform where:
One codebase = unlimited hotels.
Each hotel is only a database record.

--------------------------------------------------
CORE CONCEPT
--------------------------------------------------

• Tech stack:
  - Frontend: Next.js (latest, App Router)
  - Backend/DB/Auth: Supabase (PostgreSQL, Auth, Storage, Edge Functions)
  - Hosting: Vercel

• URL system:
  yourapp.com/s/[slug]

  slug → shops table → shop_id  
  Everything in the system must be driven by shop_id.
  No hardcoded shops. No separate deployments.

--------------------------------------------------
USER TYPES
--------------------------------------------------

1) Customer (no password)
   - QR scan
   - Enter name + phone (with consent)
   - View dynamic shop page
   - View menu, place order
   - Bill generated
   - Bill sent via WhatsApp link

2) Shop Admin (password protected)
   - Supabase Auth (email + password)
   - Can only access own shop data
   - Manage menu, prices, photos
   - See live orders
   - Generate bill
   - Create offers
   - See customer list & basic analytics

3) Super Admin (password protected)
   - Full platform access
   - Create/suspend shops
   - Assign shop admins
   - Create themes & sections
   - Control subscriptions
   - View all shops, all users, all orders
   - Global analytics dashboard

--------------------------------------------------
DATABASE DESIGN (MANDATORY)
--------------------------------------------------

shops
- id, shop_name, slug, logo, banner, whatsapp_number,
  address, about, theme_id, is_active

shop_themes
- id, primary_color, secondary_color, font, button_style

shop_sections (NO-CODE PAGE SYSTEM)
- id, shop_id, section_type (hero, offers, menu, ads, feedback, whatsapp)
- title, description, image_url, order_no, is_visible

menu_categories
- id, shop_id, name, order_no

menu_items
- id, shop_id, category_id, name, price, image, is_available

users
- id, name, phone, first_visit, last_visit, total_visits, device_type, city

orders
- id, shop_id, user_id, table_qr, total_amount, status, payment_mode, created_at

order_items
- order_id, item_id, price, qty

user_behavior
- user_id, shop_id, item_viewed, time_spent, no_order_exit

offers
- shop_id, title, description, min_visits, expiry_date

profiles (AUTH CONTROL)
- id (auth.users.id), name, email, role (super_admin | shop_admin), shop_id

--------------------------------------------------
NO-CODE HOME PAGE SYSTEM
--------------------------------------------------

The home page of every shop must be rendered ONLY from shop_sections + shop_themes.
Changing database data must change the website without touching code.

--------------------------------------------------
WHATSAPP SYSTEM (PHASE 1)
--------------------------------------------------

Use wa.me links only (no API initially):

https://wa.me/<number>?text=<encoded_message>

Use cases:
• Send bill
• Order confirmation
• Offer trigger

--------------------------------------------------
OFFER ENGINE (RULE BASED)
--------------------------------------------------

Implement base logic such as:
• 7 days inactive → WhatsApp offer
• 5 orders → reward offer
• Favorite item → combo offer
• Birthday → cake offer
• High bill → premium deal

--------------------------------------------------
SECURITY (NON-NEGOTIABLE)
--------------------------------------------------

• Supabase Auth (email + password)
• profiles table for roles
• Row Level Security ON for all tables
• Every business table must contain shop_id
• Policies:
    - shop_admin → only own shop_id
    - super_admin → full access

• Next.js middleware:
    - protect admin routes
    - check role
    - check shop match

• No secrets in frontend
• Server actions for all sensitive operations
• Rate limiting on login, order, lead forms
• Audit logs
• Soft delete & backups

--------------------------------------------------
WHAT I WANT YOU TO DELIVER
--------------------------------------------------

1) Full system architecture
2) Supabase SQL schema (with RLS policies)
3) Next.js professional folder structure
4) Slug → shop resolver logic
5) Dynamic section renderer
6) Auth & role system implementation
7) Shop admin & super admin panel base
8) WhatsApp bill system
9) Offer engine base logic
10) Security checklist

Build this like a real production-grade SaaS foundation, not a demo project.
Focus on scalability, security, and clean architecture.
